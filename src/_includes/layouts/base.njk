<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{{ title or site.name }}</title>
  <meta name="description" content="{{ description or site.tagline }}">
  <link rel="stylesheet" href="/assets/css/styles.css">
</head>
<body>
  <!-- ðŸ”¹ Intro Video Overlay -->
  <div id="intro-video-container">
    <video id="intro-video" autoplay muted playsinline>
      <source src="/assets/videos/intro.mp4" type="video/mp4">
      Your browser does not support the video tag.
    </video>
    <button id="skip-intro">Skip Intro</button>
  </div>
  <!-- ðŸ”¹ End Intro Video Overlay -->

  {% include "partials/header.njk" %}

  <main class="container">
    {{ content | safe }}
  </main>

  {% include "partials/footer.njk" %}

  <!-- ðŸ”¹ Script to hide intro after end/skip -->
<script>
  const introVideo = document.getElementById("intro-video");
  const introContainer = document.getElementById("intro-video-container");
  const skipBtn = document.getElementById("skip-intro");

  // Check if intro has already been shown
  if (localStorage.getItem("introPlayed")) {
    // Hide container immediately if already seen
    introContainer.style.display = "none";
  } else {
    // Mark as played so it won't show again
    localStorage.setItem("introPlayed", "true");

    // Hide after video ends
    introVideo.onended = () => {
      introContainer.style.display = "none";
    };

    // Hide if skip is clicked
    skipBtn.onclick = () => {
      introVideo.pause();
      introContainer.style.display = "none";
    };
  }
</script>
</body>
</html>
